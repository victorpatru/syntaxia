---
import { Image } from "astro:assets";
import CTAButton from "../components/CTAButton.astro";
import { ThemeToggle } from "../components/ThemeToggle.tsx";
import "../styles/global.css";

const APP_URL = import.meta.env.PUBLIC_APP_URL;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<link rel="manifest" href="/site.webmanifest" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- Prevent dark mode flash -->
		<script>
			(function() {
				function getSystemTheme() {
					return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
				}
				
				const storedTheme = localStorage.getItem('theme') || 'system';
				const theme = storedTheme === 'system' ? getSystemTheme() : storedTheme;
				
				if (theme === 'light') {
					document.documentElement.classList.add('light');
				}
				// Dark mode is default, no class needed
			})();
		</script>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
		
		
		<!-- Wistia Player -->
		<script src="https://fast.wistia.com/player.js" async></script>
		<script src="https://fast.wistia.com/embed/k06pni3j7d.js" async type="module"></script>
		<style>wistia-player[media-id='k06pni3j7d']:not(:defined) { background: center / contain no-repeat url('https://fast.wistia.com/embed/medias/k06pni3j7d/swatch'); display: block; filter: blur(5px); padding-top:62.29%; }</style>
		
		<title>Syntaxia</title>
		
	</head>
	<body class="min-h-screen bg-background text-foreground font-mono" style="scroll-behavior: smooth;">
		<header class="border-b border-terminal-green/30 bg-terminal-dark font-mono">
			<div class="mx-auto max-w-6xl px-6 flex h-16 items-center justify-between">
				<a href="/" class="flex items-center gap-1 hover:opacity-80 transition-opacity">
					<span class="text-terminal-amber">$</span>
					<span class="font-mono font-bold text-terminal-green">syntaxia</span>
					<span class="text-terminal-green animate-pulse">_</span>
				</a>
				
				<!-- Navigation Links -->
				<nav class="hidden md:flex items-center gap-4">
					<a href="#how-it-works" class="font-mono text-sm text-terminal-green hover:text-terminal-amber transition-colors">
						./how-it-works
					</a>
					<a href="#walkthrough" class="font-mono text-sm text-terminal-green hover:text-terminal-amber transition-colors">
						./walkthrough
					</a>
					<a href="#pricing" class="font-mono text-sm text-terminal-green hover:text-terminal-amber transition-colors">
						./pricing
					</a>
					<a href="#faq" class="font-mono text-sm text-terminal-green hover:text-terminal-amber transition-colors">
						./faq
					</a>
				</nav>
				
				<div class="flex items-center gap-3">
						<ThemeToggle client:idle />
						<CTAButton variant="secondary" size="sm" href={`${APP_URL}`}>
							./login
						</CTAButton>
				</div>
			</div>
		</header>

		<!-- Beta Notification Banner -->
		<div class="bg-terminal-amber/10 border-b border-terminal-amber/30 px-3 py-2 text-center">
			<div class="flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 text-xs font-mono">
				<div class="flex items-center gap-2">
					<span class="text-terminal-amber">⚡</span>
					<span class="text-terminal-green">Beta: Get free interview credits</span>
				</div>
				<div class="flex items-center gap-1">
					<span class="text-terminal-green/80 hidden sm:inline">- limited spots available</span>
					<a href="#beta" class="text-terminal-amber hover:underline">→ Learn more</a>
				</div>
			</div>
		</div>

		<main class="container mx-auto px-4 py-12 max-w-5xl">
			<!-- Hero Section -->
			<div class="text-center mb-16">
				<div class="mx-auto max-w-3xl md:max-w-4xl">
					<h1 class="text-4xl md:text-5xl font-bold text-terminal-green leading-[1.15] tracking-tight mb-6 mt-10" style="text-wrap: balance">
						<span class="text-terminal-amber">AI</span> phone screen practice
						<span class="block">tailored to your job description</span>
					</h1>
					<p class="text-terminal-green/70 text-base md:text-lg leading-relaxed mt-5">
						Paste your JD and talk through a 15-minute voice screen with an AI interviewer that adapts to your answers. Get a scorecard and a prioritized action plan.
					</p>
					<p class="text-terminal-green/60 text-sm md:text-base mt-3 font-mono">Try the first 15 minutes for $1</p>
					<div class="mt-6">
						<CTAButton size="lg" href={`${APP_URL}`}>
							./start-practicing
						</CTAButton>
					</div>
				</div>
			</div>

			<!-- Video Demo (moved below fold) -->
			<div id="demo" class="mb-16">
				<wistia-player media-id="k06pni3j7d" aspect="1.605351170568562"></wistia-player>
			</div>

			<!-- How it Works -->
			<div id="how-it-works" class="mb-16">
				<h2 class="text-xl font-bold text-terminal-green mb-6 text-center">$ ./how-it-works</h2>
				<div class="grid sm:grid-cols-2 gap-8 md:gap-10">
					<div class="border border-terminal-green/30 p-6 md:p-8 bg-card">
						<div class="flex items-center mb-3">
							<span class="text-terminal-amber mr-2">1.</span>
							<h3 class="text-lg font-semibold text-terminal-green">paste-jd</h3>
						</div>
						<p class="text-terminal-green/70 text-sm leading-relaxed font-mono">Paste the job description so the interview mirrors the role.</p>
					</div>
					<div class="border border-terminal-green/30 p-6 md:p-8 bg-card">
						<div class="flex items-center mb-3">
							<span class="text-terminal-amber mr-2">2.</span>
							<h3 class="text-lg font-semibold text-terminal-green">parse-job</h3>
						</div>
						<p class="text-terminal-green/70 text-sm leading-relaxed font-mono">We extract skills and topics from the JD to shape the interview.</p>
					</div>
					<div class="border border-terminal-green/30 p-6 md:p-8 bg-card">
						<div class="flex items-center mb-3">
							<span class="text-terminal-amber mr-2">3.</span>
							<h3 class="text-lg font-semibold text-terminal-green">practice-conversation</h3>
						</div>
						<p class="text-terminal-green/70 text-sm leading-relaxed font-mono">Talk through problems with the AI interviewer—like a real phone screen.</p>
					</div>
					<div class="border border-terminal-green/30 p-6 md:p-8 bg-card">
						<div class="flex items-center mb-3">
							<span class="text-terminal-amber mr-2">4.</span>
							<h3 class="text-lg font-semibold text-terminal-green">get-review-and-plan</h3>
						</div>
						<p class="text-terminal-green/70 text-sm leading-relaxed font-mono">Receive a clear scorecard and a prioritized action plan with next steps.</p>
					</div>
				</div>
			</div>

			<!-- Social Proof Section -->
<!-- 			
			<div class="text-center mb-12">
				<h2 class="text-xl font-bold text-terminal-green mb-6">$ cat testimonials.txt</h2>
				<div class="grid md:grid-cols-3 gap-6 mb-8">
					<div class="border border-terminal-green/30 p-4 bg-card">
						<p class="text-terminal-green/80 text-sm mb-3 font-mono">
							"Finally got past the screening at <span class="text-terminal-amber">Google</span>. The AI conversations felt just like real phone screens."
						</p>
						<div class="text-terminal-green/60 text-xs">
							- Sarah Chen, Software Engineer
						</div>
					</div>
					<div class="border border-terminal-green/30 p-4 bg-card">
						<p class="text-terminal-green/80 text-sm mb-3 font-mono">
							"Practiced for <span class="text-terminal-amber">3 days</span>, landed my dream job at a startup. The role-specific questions were spot on."
						</p>
						<div class="text-terminal-green/60 text-xs">
							- Marcus Rodriguez, Frontend Dev
						</div>
					</div>
					<div class="border border-terminal-green/30 p-4 bg-card">
						<p class="text-terminal-green/80 text-sm mb-3 font-mono">
							"Went from failing every phone screen to <span class="text-terminal-amber">3 offers</span> in one month."
						</p>
						<div class="text-terminal-green/60 text-xs">
							- Jamie Park, Full Stack Dev
						</div>
					</div>
				</div>
				<div class="text-terminal-green/50 text-sm font-mono">
					Join 2,847+ developers who landed their dream jobs
				</div>
			</div>
			 -->

			<!-- Features Grid removed to reduce repetition with How it works -->

			<!-- Product Screenshots -->
			<div id="walkthrough" class="mb-16">
				<h2 class="text-xl font-bold text-terminal-green mb-8 text-center">$ ./walkthrough</h2>
				<!-- Steps 1 & 2 on same row -->
				<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-8">
					<!-- Step 1: Job Description Input -->
					<div class="border border-terminal-green/30 bg-card p-4 relative">
						<div class="absolute -top-3 left-4 bg-background px-3 py-1 border border-terminal-green/30 z-10">
							<span class="text-terminal-amber font-mono text-xs">Step 1</span>
						</div>
						<div class="bg-terminal-dark border border-terminal-green/20 overflow-hidden mb-3 h-[280px] mt-3">
							<a href="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-jd-page.png" data-glightbox="title: Step 1: Input job description; description: Paste your job description so the interview mirrors the role.">
								<Image 
									src="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-jd-page.png"
									alt="Syntaxia job description input interface showing where users paste and analyze job requirements"
									class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity"
									loading="lazy"
									width={1200}
									height={800}
								/>
							</a>
						</div>
						<p class="text-terminal-green/70 text-sm mt-1">Input job description</p>
						
					</div>

					<!-- Step 2: Interview Session -->
					<div class="border border-terminal-green/30 bg-card p-4 relative">
						<div class="absolute -top-3 left-4 bg-background px-3 py-1 border border-terminal-green/30 z-10">
							<span class="text-terminal-amber font-mono text-xs">Step 2</span>
						</div>
						<div class="bg-terminal-dark border border-terminal-green/20 overflow-hidden mb-3 h-[280px] mt-3">
							<a href="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-interview-page.png" data-glightbox="title: Step 2: Start having an actual conversation; description: Talk through problems with the AI interviewer—like a real phone screen.">
								<Image 
									src="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-interview-page.png"
									alt="Syntaxia interview session interface showing voice conversation with AI interviewer"
									class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity"
									loading="lazy"
									width={1200}
									height={800}
								/>
							</a>
						</div>
						<p class="text-terminal-green/70 text-sm mt-1">Start having an actual conversation</p>
						
					</div>
				</div>

				<!-- Step 3 on its own row for better visibility -->
				<div class="max-w-4xl mx-auto">
					<!-- Step 3: Detailed Report -->
					<div class="border border-terminal-green/30 bg-card p-4 relative">
						<div class="absolute -top-3 left-4 bg-background px-3 py-1 border border-terminal-green/30 z-10">
							<span class="text-terminal-amber font-mono text-xs">Step 3</span>
						</div>
						<div class="bg-terminal-dark border border-terminal-green/20 overflow-hidden mb-3 h-[400px] mt-3">
							<a href="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-report-page.png" data-glightbox="title: Step 3: Get a detailed report after the interview; description: Receive a clear scorecard and a prioritized action plan with next steps.">
								<Image 
									src="https://afg7xsppojwqvdjk.public.blob.vercel-storage.com/dark-report-page.png"
									alt="Syntaxia session review dashboard showing performance metrics and improvement suggestions"
									class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity"
									loading="lazy"
									width={1200}
									height={800}
								/>
							</a>
						</div>
						<p class="text-terminal-green/70 text-sm mt-1">Get a detailed report after the interview</p>
					</div>
				</div>
			</div>

			<!-- Pricing -->
			<div id="pricing" class="mb-16">
				<h2 class="text-xl font-bold text-terminal-green mb-6 text-center">$ ./pricing</h2>
				<div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8">
					<!-- 1 Session -->
					<div class="border border-terminal-green/30 bg-card p-8 md:p-10 flex flex-col">
						<h3 class="text-terminal-green font-semibold text-lg md:text-xl mb-3 mt-3">./1-session</h3>
						<p class="text-4xl md:text-5xl text-terminal-amber font-mono">$12.99</p>
						<p class="text-terminal-green/70 text-sm mt-3">15-minute interview session</p>
					</div>

					<!-- 3 Sessions -->
					<div class="border border-terminal-green/30 bg-card p-8 md:p-10 pt-14 flex flex-col relative">
						<div class="absolute right-3 top-3 text-[11px] md:text-xs px-3 py-[6px] bg-terminal-green/10 border border-terminal-green/30 text-terminal-green font-mono">
							Save $3.98 (10.2%)
						</div>
						<h3 class="text-terminal-green font-semibold text-lg md:text-xl mb-3 mt-3">./3-sessions</h3>
						<p class="text-4xl md:text-5xl text-terminal-amber font-mono">$34.99</p>
						<p class="text-terminal-green/70 text-sm mt-3">3 × 15-minute interview sessions</p>
					</div>

					<!-- 5 Sessions -->
					<div class="border border-terminal-green/30 bg-card p-8 md:p-10 pt-14 flex flex-col relative">
						<div class="absolute right-3 top-3 text-[11px] md:text-xs px-3 py-[6px] bg-terminal-green/10 border border-terminal-green/30 text-terminal-green font-mono">
							Save $9.96 (15.3%)
						</div>
						<h3 class="text-terminal-green font-semibold text-lg md:text-xl mb-3 mt-3">./5-sessions</h3>
						<p class="text-4xl md:text-5xl text-terminal-amber font-mono">$54.99</p>
						<p class="text-terminal-green/70 text-sm mt-3">5 × 15-minute interview sessions</p>
					</div>
				</div>

				<!-- Pricing info only - no CTA here -->
				<div class="text-center mt-6">
					<p class="text-terminal-green/60 text-sm font-mono">
						No subscription • Pay per session
					</p>
				</div>
			</div>

			<!-- FAQ / Objections -->
			<div id="faq" class="mb-12">
				<h2 class="text-xl font-bold text-terminal-green mb-6 text-center">$ ./faq</h2>
				<div class="space-y-4">
					<details class="border border-terminal-green/30 bg-card">
						<summary class="p-4 cursor-pointer font-mono text-sm text-terminal-green hover:bg-terminal-green/5">
							Q: How is this different from LeetCode practice?
						</summary>
						<div class="px-4 pb-4 text-terminal-green/80 text-sm">
							LeetCode tests algorithm knowledge. Syntaxia practices the actual conversation skills and communication abilities that real phone screens require. You'll experience realistic technical discussions, not just algorithmic problem-solving.
						</div>
					</details>
				</div>
			</div>

			<!-- Beta Access Section -->
			<div id="beta" class="text-center mb-12">
				<div class="border border-terminal-amber/50 bg-terminal-amber/5 px-8 py-12 mx-auto">
					<h2 class="text-xl font-bold text-terminal-green mb-3">$ ./join-beta</h2>
					<p class="text-terminal-green/80 text-sm mb-6 font-mono">
						Get free credits to try Syntaxia. We're looking for beta users who can provide feedback.
					</p>
					<a 
						href="https://tally.so/r/31jYpQ" 
						target="_blank"
						class="inline-block font-mono text-sm bg-transparent border border-terminal-amber text-terminal-amber hover:bg-terminal-amber hover:text-black px-6 py-3 transition-colors"
					>
						./request-beta-access
					</a>
					<p class="text-terminal-green/60 text-xs mt-3 font-mono">
						Free interview credits • Beta program
					</p>
				</div>
			</div>

			<!-- Primary CTA -->
			<div class="text-center mb-12">
				<div class="border border-terminal-green/30 bg-card px-8 py-16 mx-auto">
					<h2 class="text-2xl font-bold text-terminal-green mb-4">$ ./ready-to-practice</h2>
					<p class="text-terminal-green/80 text-base mb-6 font-mono">
						Stop failing phone screens. Start landing offers.
					</p>
					<CTAButton size="lg" href={`${APP_URL}`}>
						./start-practicing
					</CTAButton>
					<p class="text-terminal-green/50 text-sm mt-3 font-mono">
						Sign up free • Try first session for $1 • No subscription required
					</p>
				</div>
			</div>

			<!-- Footer -->
			<div class="mt-12 text-center">
				<div class="border-t border-terminal-green/20 pt-6">
					<!-- Footer Navigation -->
					<div class="flex justify-center gap-6 mb-4">
						<a 
							href="/terms" 
							class="font-mono text-xs text-terminal-green/70 hover:text-terminal-amber transition-colors"
						>
							./terms
						</a>
						<a 
							href="/privacy" 
							class="font-mono text-xs text-terminal-green/70 hover:text-terminal-amber transition-colors"
						>
							./privacy
						</a>
					</div>
					<p class="text-terminal-green/50 text-sm">
						Built for developers, by developers. Practice like you're already hired.
					</p>
				</div>
			</div>
		</main>
		
		<!-- Custom Lightbox JavaScript -->
		<script>
			// Simple lightbox implementation
			document.addEventListener('DOMContentLoaded', () => {
				const lightboxLinks = document.querySelectorAll('[data-glightbox]');
				
				lightboxLinks.forEach(link => {
					link.addEventListener('click', (e) => {
						e.preventDefault();
						
						// Create lightbox overlay
						const overlay = document.createElement('div');
						overlay.style.cssText = `
							position: fixed;
							top: 0;
							left: 0;
							width: 100%;
							height: 100%;
							background: rgba(0, 0, 0, 0.9);
							display: flex;
							align-items: center;
							justify-content: center;
							z-index: 9999;
							cursor: pointer;
						`;
						
						// Create image
						const img = document.createElement('img');
						img.src = (link as HTMLAnchorElement).href;
						img.style.cssText = `
							max-width: 90%;
							max-height: 90%;
							object-fit: contain;
							border: 2px solid #00ff00;
						`;
						
						overlay.appendChild(img);
						document.body.appendChild(overlay);
						
						// Close on click
						overlay.addEventListener('click', () => {
							document.body.removeChild(overlay);
						});
						
						// Close on ESC
						const handleEsc = (e: KeyboardEvent) => {
							if (e.key === 'Escape') {
								document.body.removeChild(overlay);
								document.removeEventListener('keydown', handleEsc);
							}
						};
						document.addEventListener('keydown', handleEsc);
					});
				});
			});
		</script>
	</body>
</html>
